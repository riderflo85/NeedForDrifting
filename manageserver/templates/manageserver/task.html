{% extends 'acserver/base.html' %}
{% load static %}
{% block content %}

<div class="container-fluid margin-manager-server">
    <div class="row align-items-center justify-content-center text-center">
        <div class="col-lg-12 align-self-center title-manager">
            <h1 class="text-white">Bienvenu <strong class="text-color">{{ user.username }}</strong> !</h1>
        </div>
        <div class="col-lg-4 align-self-baseline box-manager">
            <a href="{% url 'manageserver:upload' %}" type="button" class="btn btn-primary a-manager">Ajouter du contenu sur un serveur</a>
        </div>
        <div class="col-lg-4 align-self-baseline box-manager">
            <button type="button" class="btn btn-info btn-manager" id="editCfg">Modifier les paramètres d'un serveur</button>
            <div id="divEditCfg" data-display="hidden" style="display: none;">
                <ul class="list-group">
                    {% for server in servers %}
                    <li class="list-group-item"><a href="{% url 'manageserver:editcfg' server.id %}" class="btn btn-info">{{ server.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="col-lg-4 align-self-baseline box-manager">
            <button type="button" class="btn btn-success btn-manager" id="editCarList">Modifier la liste des voitures d'un serveur</button>
            <div id="divEditCarList" data-display="hidden" style="display: none;">
                <ul class="list-group">
                    {% for server in servers %}
                    <li class="list-group-item"><a href="{% url 'manageserver:editcarlist' server.id %}" class="btn btn-success">{{ server.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid servers-stat">
    <div class="row">
        <div class="col-12 d-flex justify-content-around" id="serversAction">
            {% for server in servers %}
            <div class="card server-action" data-id="{{ server.pk }}">
                <div class="card-header d-flex justify-content-between">
                    <h5>{{ server.name }}</h5>
                    {% if server.status == "running" %}
                    <div class="point-status status-running align-self-center" id="roundStat{{ server.pk }}"></div>
                    {% elif server.status == "stoping" %}
                    <div class="point-status status-stoping align-self-center" id="roundStat{{ server.pk }}"></div>
                    {% endif %}
                </div>
                <div class="card-body text-center align-items-center" id="bodyBtn{{ server.pk }}">
                    <div class="d-flex justify-content-around" id="groupBtnAction{{ server.pk }}">
                        <button class="btn btn-info" id="statusServ{{ server.pk }}" data-cmd="status" data-toggle="tooltip" data-placement="left" title="Rechargement du status"><i class="fas fa-info-circle"></i></button>
                        <button class="btn btn-success" id="runServ{{ server.pk }}" data-cmd="start"><i class="fas fa-play"></i></button>
                        <button class="btn btn-warning" id="rebootServ{{ server.pk }}" data-cmd="restart"><i class="fas fa-sync-alt"></i></button>
                        <button class="btn btn-danger" id="stopServ{{ server.pk }}" data-cmd="stop"><i class="fas fa-power-off"></i></button>
                    </div>
                    <button class="btn btn-primary mt-3" id="updatePack{{ server.pk }}">Mettre à jour le pack</button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock content %}
{% block script %}

<script src="{% static 'manageserver/js/secureajax.js' %}"></script>
<script src="{% static 'manageserver/js/script.js' %}"></script>
<script src="{% static 'manageserver/js/btncfg.js' %}"></script>
<script src="{% static 'manageserver/js/cmdserver.js' %}"></script>

{% endblock script %}